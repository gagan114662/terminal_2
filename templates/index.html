{% extends "base.html" %}

{% block title %}Home - Simple Blog{% endblock %}

{% block content %}
    <h2>Recent Blog Posts</h2>

    {% if posts %}
        <div class="posts">
            {% for post in posts %}
                <article class="post-card">
                    <h3><a href="{{ url_for('view_post', post_id=post.id) }}">{{ post.title }}</a></h3>
                    <div class="post-meta">
                        By <a href="{{ url_for('profile', username=post.author.username) }}">{{ post.author.username }}</a>
                        on {{ post.created_at.strftime('%B %d, %Y') }}
                    </div>
                    <div class="post-preview">
                        {{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}
                    </div>
                    <a href="{{ url_for('view_post', post_id=post.id) }}" class="read-more">Read more â†’</a>
                </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <p>No blog posts yet.</p>
            {% if current_user.is_authenticated %}
                <p><a href="{{ url_for('create_post') }}" class="btn">Create your first post!</a></p>
            {% else %}
                <p><a href="{{ url_for('register') }}" class="btn">Register to start blogging!</a></p>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}